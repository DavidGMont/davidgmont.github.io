const intervieweeForm=document.querySelector("#interviewee-form"),store=e=>{localStorage.setItem("data",JSON.stringify(e))},retrieveSavedRegistres=()=>JSON.parse(localStorage.getItem("data")),removeSavedRegister=e=>{const t=retrieveSavedRegistres().filter((t=>t.id!==e));store(t)},countSavedRegistres=()=>JSON.parse(localStorage.getItem("data")).length,toggleSubmitButton=()=>{document.querySelector('input[type="submit"]').disabled=countSavedRegistres()>=6},removeRegister=e=>{const t=parseInt(e.target.id.split("-")[1]);removeSavedRegister(t),displaySavedData(),toggleSubmitButton(),updateFormVisibility()},updateFormVisibility=()=>{const e=document.querySelector("#form-container"),t=document.querySelector("#completed");countSavedRegistres()<6?(e.style.removeProperty("display"),t.style.display="none"):(e.style.display="none",t.style.removeProperty("display"))};document.addEventListener("click",(e=>{"BUTTON"===e.target.tagName&&e.target.id.startsWith("remove")&&removeRegister(e),0===countSavedRegistres()&&(document.querySelector("#registres-section").style.display="none"),toggleSubmitButton()}));const createInputField=(e,t,o,r)=>`\n        <label for="result-${e}-${t}">${r}</label>\n        <input\n            type="text"\n            id="result-${e}-${t}"\n            name="result-${e}-${t}"\n            value="${o}"\n            aria-label="${r}"\n            readonly />\n        <small>${r} del oyente.</small>\n    `,createFieldset=(e,t,o)=>`\n        <fieldset>\n            <legend>\n                <span style="font-size: 1.25rem; font-weight: bold">${t}</span>\n            </legend>\n            ${o.join("")}\n        </fieldset>\n    `,createRegisterArticle=(e,t)=>{const o=[createInputField(t,"full-name",e.data.fullName,"Nombre completo"),createInputField(t,"id-info",e.data.idInfo,"Número de documento"),createInputField(t,"date-of-birth",e.data.dateOfBirth,"Fecha de nacimiento"),createInputField(t,"email",e.data.email,"Correo electrónico"),createInputField(t,"city-of-residence",e.data.cityOfResidence,"Ciudad de residencia"),createInputField(t,"city-of-origin",e.data.cityOfOrigin,"Ciudad de origen")],r=[createInputField(t,"top-1-song",e.topSongs.top1Song,"Top #1 Canción Favorita"),createInputField(t,"top-2-song",e.topSongs.top2Song,"Top #2 Canción Favorita"),createInputField(t,"top-3-song",e.topSongs.top3Song,"Top #3 Canción Favorita")];return`\n        <article>\n            <header><h3>Registro #${t+1}</h3></header>\n            <form>\n                ${createFieldset(0,"Datos personales del oyente",o)}\n                ${createFieldset(0,"Top 3 Canciones Favoritas",r)}\n            </form>\n            <footer style="text-align: right">\n                <button id="remove-${e.id}" class="outline secondary" type="button">Eliminar registro</button>\n            </footer>\n        </article>\n    `},displaySavedData=()=>{const e=document.querySelector("#registres"),t=retrieveSavedRegistres();1===t.length&&document.querySelector("#registres-section").style.removeProperty("display"),t&&(e.innerHTML="",t.reverse(),t.forEach(((o,r)=>{e.innerHTML+=createRegisterArticle(o,t.length-r-1)}))),toggleSubmitButton()};window.addEventListener("load",(()=>{const e=document.querySelector("#registres-section"),t=document.querySelector("#completed"),o=document.querySelector("#form-container"),r=countSavedRegistres();r>0&&r<=6&&e.style.removeProperty("display"),6===r&&(t.style.removeProperty("display"),o.style.display="none"),displaySavedData(),toggleSubmitButton();const n=document.querySelector("#date-of-birth"),i=new Date,a=new Date(i.setFullYear(i.getFullYear()-13));n.max=a.toISOString().split("T")[0]})),intervieweeForm.addEventListener("submit",(e=>{e.preventDefault();const t={id:Date.now(),data:{fullName:document.querySelector("#full-name").value,idInfo:document.querySelector("#id-info").value,dateOfBirth:document.querySelector("#date-of-birth").value,email:document.querySelector("#email").value,cityOfResidence:document.querySelector("#city-of-residence").value,cityOfOrigin:document.querySelector("#city-of-origin").value},topSongs:{top1Song:document.querySelector("#top-1-song").value,top2Song:document.querySelector("#top-2-song").value,top3Song:document.querySelector("#top-3-song").value}},o=retrieveSavedRegistres()||[];o.push(t),store(o),displaySavedData(),toggleSubmitButton(),updateFormVisibility()}));